___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Sitefinity Insight",
  "categories": ["ANALYTICS", "CONVERSIONS", "MARKETING"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/jpeg;base64,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zw/Bwx9DiUqzZS3jvcvB7qbguOI+DnUfm40hP7L1bDWBcjUIEnQ1KLIWI/BAEJJUpqpUiiw6NtKo8TBqJg6mL6oZOc4qsfixU1kww/2hk4bjxawSp5YdTj6aUuK8S2yPTmp92gvamfEri+XbH/g3DpXAOsX27BeJgLypvzIcT1a5HpzEQCxakx7y/wBFNXJeruijIwlQcv8AA+6hWOm7PF2y/wA1fDwm6zyPTlkCVgqRE/mfdTdPDoWJYDxKFgIej/tFzJcjuMgEcGkFTqbv/KmS71jkenLS4YOB5teGUYq5qP8AYvB8bsZHeKaNRDx8WGR6cs1PF2WPkqEdhfLWIb+zg1djxu83MmaWGR6cw6EmDSap1Nz9V5khaISAuSpSwZeu3KmlhkenNRTd6pZe/vPukAIl42eX7cqaWGR6c4Rd4RfU+OzLvJZZftyppYZHpzrU8XfDg+q4XRgLmwy/blTSwyPTn05EwSiliCb+X7cqaWGR6fDvl+3KmlhkenNwrHNqTm/J4rim6LJ8v25U0sMj05lOQL1aAkPJd6pMg9dmWWT5ftyppYZHpzEuvZLjy1P+FgbjcyyyfL9uVNLDI+WEv8JvqaL2Tf5d7LLJ8r25U034lgvoymA5aSE8Xo1Op0ODvZZZPke3Kmm8S6IFDChxC45hu9YJSkpPc0aasC8TcyyxcFQCVpbjGduVNNxABVuCoRe2vfqopj25uPJcHEqem7ZwetuWWDwPvFcqM8s3G5lTTbEeDtCr4eN38/Mx/dxpzxpurLN5wCGwKgFn03e6GgC4N3Kmlcbrqrior2JwPVR8CBAE70AEBAbjhQBVuCoCX+59VDMO2+j1Ig8P7RcoXAfDNQc/rvFCT1V3/wCCH//aAAwDAQACAAMAAAAQ8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888+8888888888888888888888BidJL8888888888888888884W9888f1+8888888888888888u2+8888+++8888888888888888803+8888sfL888888888888P0YAIS788888988888888886rc8++pJj4988898888888888c++8888/a8u888988888888888N0z8888+pU88898888888888888R4088+BU8889888888888888888o88+BU88898888888888884tdU88+BU88898888888888D2/99U88+BU88808888888888gd099U884qU882g888888888888+a9U8xh8Ux0888888888888888ucpYy88/l8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888//EACkRAAECAwcEAwEBAAAAAAAAAAEAESExURAgQXGBscEwQKHhkdHwcGH/2gAIAQMBAT8Q/g76GCHCv/p4RK8b5rDdRyPpORcdp6hPlOA9MLjyNtl6sOyIJRovcp8X4W70HiiDRMaHsoazByj0EKiV4hOFhYrj7T+H6rgWCYg6ngIpLOo+k/lwiADFYUGmHpMoY3p9HU9SifRvta/Blj68IF4hMhcKOrimPtHWBjcn0dMZjJGSiZD1Dml6BgvQf0FAgWoPFbG9sXZ/m5Po6hiseHhNZa6JoiSmg2UrMbG5Po6zOXCPM0PBTMWNoXijZSMxsbk+jsBONF7QvFGykZjY3J9HVeBNuj32ClLzOLQvFGykZjY3J9HTcywWE6ngfafy5QmpC8zi0LxRspGY2NwYllz02jOE/QFMfaJExQmpC8zi0TRAjQbKRmNjYA698iY8w6o6BjUI67PUOaKUvM4sMMMK4Jl/BQWScxsUXcBhU/oqJAPUeKdkMJy/Cjo5pggLDC0GALgRQAAYfwb/xAApEQEAAAMGBgMAAwAAAAAAAAABABFBITFRcYGhECBhscHRMEDwYHDh/9oACAECAQE/EP5hM+unYAqxMxm4rtCusTCXVOLkdHk9QVElT6ayieafcZsXBFAuNOSyOxKOZEi8G601gAmfReKg4MmJzod5mQiX8zJN0Xw0g2UrEv0x+lOydcrmVi/hiLv85nZ3ok2YVPcSAxuZnyuTAqwaRn1eD3CTu2DyeoIgDUh0ExieJ0KPrtEwZfrmvNtD41AmxPvDmbXSLa7AoZHGf+dnMiQZlR9QAmQuAOv6yJ4kzFfo1h8cko8m0PjFUpsHviQio6p5w5lQXVXaYQCB6L4x4WUrAnWU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"
  },
  "description": "Sitefinity Insight empowers your marketing teams to track user behavior, visualize data in meaningful reports, understand your audience, and build impactful personalization content.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "CHECKBOX",
    "name": "usedForSfSiteWithSdk",
    "checkboxText": "Use this tag only on Sitefinity CMS sites",
    "simpleValueType": true,
    "help": "If checked, the Insight SDK client will take its configuration from the Sitefinity CMS, and you don’t need to configure them manually here."
  },
  {
    "type": "SELECT",
    "name": "apiServerUrl",
    "displayName": "Insight deployment",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "https://api.insight.sitefinity.com",
        "displayValue": "United States of America"
      },
      {
        "value": "https://nl-api.insight.sitefinity.com",
        "displayValue": "The Netherlands in the European Union (EU)"
      },
      {
        "value": "https://au-api.insight.sitefinity.com",
        "displayValue": "Australia"
      },
      {
        "value": "https://ca-api.insight.sitefinity.com",
        "displayValue": "Canada"
      },
      {
        "value": "https://sg-api.insight.sitefinity.com",
        "displayValue": "Republic of Singapore"
      }
    ],
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "defaultValue": "https://api.insight.sitefinity.com",
    "help": "Sitefinity Insight deployment is the geographic data center where Insight servers are physically located. Every Sitefinity Insight account with associated user accounts and collected tracking data is bound to the Sitefinity Insight deployment on which it was created and is isolated from other Sitefinity Insight deployments. Your choice of deployment affects the governing law of your data, and helps you deliver speed, scale, and better performance for your visitors.",
    "enablingConditions": [
      {
        "paramName": "usedForSfSiteWithSdk",
        "paramValue": true,
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "dcApiKey",
    "displayName": "Data Center API key",
    "simpleValueType": true,
    "notSetText": "Enter your data center api key",
    "help": "A data center is a single unit holding information from one or more data sources - systems or sites. A data center is the logical and physical separation of uploaded data. Data from different data centers cannot be mixed, and is always reported, processed, and viewed separately. Each data center has a unique associated API key (a GUID) that you use to relate the reported data to this specific data center.\n\nYou can retrieve the API key from Insight\u0027s administration section.",
    "enablingConditions": [
      {
        "paramName": "usedForSfSiteWithSdk",
        "paramValue": true,
        "type": "NOT_EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "source",
    "displayName": "Data Source",
    "simpleValueType": true,
    "defaultValue": "Website",
    "help": "The data source is a string that identifies the channel from which the data comes from. Use the same data source value for all of your sites if you want unify the journeys of your customers in one contact. Using different data source values will result in separate contacts per site.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "usedForSfSiteWithSdk",
        "paramValue": true,
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "trackingCookieDomain",
    "displayName": "Tracking cookie domain",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "usedForSfSiteWithSdk",
        "paramValue": true,
        "type": "NOT_EQUALS"
      }
    ],
    "help": "If you want to track a specific domain, enter the full domain name for example:\nmydomain.com\n\nIf you want to track the root domain together with all sub domains you can write for example:\n.mydomain.com",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "maxAgeForTrackingCookieInDays",
    "displayName": "Max age for the tracking cookie",
    "simpleValueType": true,
    "defaultValue": 365,
    "valueUnit": "days",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "POSITIVE_NUMBER"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "usedForSfSiteWithSdk",
        "paramValue": true,
        "type": "NOT_EQUALS"
      }
    ],
    "help": "The value for how long (in days) the visitor’s browser to retain the tracking cookie. The default value is 365, which is one year."
  },
  {
    "type": "CHECKBOX",
    "name": "slidingExpirationForTrackingCookie",
    "checkboxText": "Sliding expiration for the tracking cookie",
    "simpleValueType": true,
    "defaultValue": false,
    "enablingConditions": [
      {
        "paramName": "usedForSfSiteWithSdk",
        "paramValue": true,
        "type": "NOT_EQUALS"
      }
    ],
    "help": "Check this if you want the cookie validation to reset every time the visitor visits the tracked property."
  },
  {
    "type": "TEXT",
    "name": "predicate",
    "displayName": "Interaction type",
    "simpleValueType": true,
    "help": "The interaction type (also known as Predicate) that has been  performed and reported, for example, Visit, Submit form or Button click etc...",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "trackingObject",
    "displayName": "Interaction",
    "simpleValueType": true,
    "help": "An interaction (also known as Object) is the entity on which the subject performs the reported action. For example if the Interaction type is \"Visit\" than the Interaction should be the URL of the page \"https://my-url.com\".\nThe value is not limited to URLs, it could be any string."
  },
  {
    "type": "PARAM_TABLE",
    "name": "subjectMetadata",
    "displayName": "Contact details (also known as Subject metadata)",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "key",
          "displayName": "Key",
          "simpleValueType": true
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "value",
          "displayName": "Value",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ],
    "help": "Provides additional information for a contact. For example, first and last name, country, and phone number. For keys you can use the names of the defined contact properties in Insight or report a new key and added as an alias to new or existing contact property later in Insight."
  },
  {
    "type": "PARAM_TABLE",
    "name": "objectMetadata",
    "displayName": "Additional interaction data",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "key",
          "displayName": "Key",
          "simpleValueType": true
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "value",
          "displayName": "Value",
          "simpleValueType": true
        },
        "isUnique": false
      }
    ],
    "help": "Keep it empty unless you\u0027re instructed not to do so."
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
const copyFromWindow = require('copyFromWindow');
const setInWindow = require('setInWindow');
const callInWindow = require('callInWindow');
const aliasInWindow = require('aliasInWindow');
const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const productName = 'Sitefinity Insight';
const sdkUrl = 'https://cdn.insight.sitefinity.com/sdk/sitefinity-insight-client.min.3.1.5.js';
const bridgeScriptUrl = 'https://cdn.insight.sitefinity.com/sdk/gtm-bridge-latest.min.js';

log('data =', data);

log(productName + ': Loading script from ' + sdkUrl);

// If the script loaded successfully, log a message and signal success
const onSuccess = () => {
  log(productName + ': Bridge script loaded successfully!');
  callInWindow(
    'sfInsightCreateInstance', 
    [
      data
    ]
  );

  log(productName + ': Bridge initiated!');
  data.gtmOnSuccess();
};

// If the script fails to load, log a message and signal failure
const onFailure = () => {
  log(productName +': Script load failed.');
  data.gtmOnFailure();
};

// If the URL input by the user matches the permissions set for the template,
// inject the script with the onSuccess and onFailure methods as callbacks.
if (queryPermission('inject_script', sdkUrl)) {
  log(productName + ': has permissions for this sdk url!');
  if(!data.usedForSfSiteWithSdk) {
    injectScript(sdkUrl, () => {
      log(productName + ': SDK loaded successfully!');
      log(productName + ': Loading script from ' + bridgeScriptUrl);
      injectScript(bridgeScriptUrl, onSuccess, onFailure, 'sfInsightGtagBridge');
    }, onFailure, 'sfInsightSdk');
  }else{
    // Used inside sitefinity site
    log(productName + ': SDK is already loaded by SF!');
    log(productName + ': Tag will load only the bridge itself!');
    injectScript(bridgeScriptUrl, onSuccess, onFailure, 'sfInsightGtagBridge');
  }
} else {
  log(productName + ': Script load failed due to permissions mismatch.');
  log(sdkUrl + ' has no permissions to load.');
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.insight.sitefinity.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "sfDataIntell"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "sfInsightCreateInstance"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []
setup: |-
  const mockData = {
    "dcApiKey":"my-data-center-api-key",
    "sdkUrl":"https://cdn.insight.sitefinity.com/sdk/sitefinity-insight-  client.min.3.1.5.js",
    "trackingCookieDomain":".my-domain-and-subdomains.com",
    "apiServerUrl":"https://",
    "source":"Website",
    "gtmTagId":2147483646,
    "gtmEventId":3
  };

  // Call runCode to run the template's code.

  runCode(mockData);

  assertApi('queryPermission').wasCalled();


___NOTES___

Created on 3/21/2022, 11:36:49 AM


